<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>365 Bolos Premium</title>

<style>

/* ===== GERAL ===== */
body{
font-family: Arial, sans-serif;
margin:0;
}

/* ===== LOGIN (FUNDO ESCURO) ===== */
#login{
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
height:100vh;
background:#111;
color:white;
}

#login h1{
font-size:28px;
}

#login .bolo-grande{
font-size:100px;
margin-bottom:20px;
}

#login input{
padding:10px;
font-size:16px;
margin:10px 0;
}

#login button{
padding:10px 20px;
background:#ff7a00;
color:white;
border:none;
border-radius:8px;
cursor:pointer;
}

/* ===== APP (FUNDO CLARO) ===== */
#app{
display:none;
padding:20px;
background:#f4f4f4;
min-height:100vh;
color:#111;
}

h1{
text-align:center;
}

/* ===== MENU FIXO ===== */
#menuTopo{
position:sticky;
top:0;
background:#ffffff;
padding:10px;
z-index:1000;
border-bottom:1px solid #ddd;
}

#busca{
width:100%;
padding:8px;
border-radius:8px;
border:1px solid #ccc;
margin-bottom:10px;
}

/* ===== MENU CATEGORIAS ===== */
.menuCategorias{
display:flex;
gap:10px;
overflow-x:auto;
}

.menuCategorias button{
background:#ff7a00;
border:none;
color:white;
padding:6px 15px;
border-radius:20px;
cursor:pointer;
white-space:nowrap;
}

/* ===== SE√á√ïES ===== */
.secao{
margin-top:30px;
}

.secao h2{
margin-bottom:10px;
color:#111;
}

/* ===== CARROSSEL ===== */
.carrossel{
display:flex;
gap:15px;
overflow-x:auto;
}

/* ===== CARD ESCURO ===== */
.card{
min-width:260px;
background:#222;
border-radius:20px;
padding:15px;
box-shadow:0 5px 15px rgba(0,0,0,0.2);
cursor:pointer;
transition:0.3s;
color:white;
}

.card:hover{
transform:scale(1.03);
}

.emoji-capa{
font-size:50px;
text-align:center;
}

.card h3{
color:white;
}

/* ===== DETALHES FUNDO BRANCO ===== */
.detalhes{
display:none;
margin-top:15px;
background:white;
color:#111;
padding:15px;
border-radius:15px;
font-size:14px;
}

.detalhes h4{
color:#111;
margin-top:10px;
}

ul{
padding-left:18px;
}

</style>
</head>

<body>

<div id="login">
<div class="bolo-grande">üéÇ</div>
<h1>App-365 Bolos</h1>
<input type="password" id="senha" placeholder="Digite a senha">
<button onclick="entrar()">Entrar</button>
</div>

<div id="app">

<div id="menuTopo">
<input type="text" id="busca" placeholder="üîé Buscar receita..." onkeyup="filtrarBusca()">
<div class="menuCategorias" id="menuCategorias"></div>
</div>

<h1>üç∞ 365 Bolos Sem A√ß√∫car, Sem Leite e Sem Gl√∫ten</h1>

<div id="conteudo"></div>

</div>

<script>

function entrar(){
const senha = document.getElementById("senha").value;
if(senha === "1950*"){
document.getElementById("login").style.display="none";
document.getElementById("app").style.display="block";
}else{
alert("Senha incorreta");
}
}

const url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSTF1_fDqiUJW1xlBwsMznwLbjZffyNVV0zuRJIEzIav_CsCj8nVuur1ap5iIl0UQyD1q5oOdG5JT3v/pub?gid=0&single=true&output=csv";

let receitas = [];
let categorias = {};

function extrairIngredientePrincipal(sabor){
sabor = sabor.toLowerCase();

const palavras = sabor.split(" ");

const ignorar = ["com","de","sem","bolo","e"];

for(let palavra of palavras){
if(!ignorar.includes(palavra) && palavra.length > 2){
return palavra.charAt(0).toUpperCase() + palavra.slice(1);
}
}

return palavras[0];
}

function pegarEmoji(sabor){
sabor = sabor.toLowerCase();
if(sabor.includes("chocolate")) return "üç´";
if(sabor.includes("laranja")) return "üçä";
if(sabor.includes("coco")) return "ü••";
if(sabor.includes("banana")) return "üçå";
if(sabor.includes("cenoura")) return "ü•ï";
if(sabor.includes("lim√£o") || sabor.includes("limao")) return "üçã";
return "üéÇ";
}

fetch(url)
.then(res => res.text())
.then(data => {

const linhas = data.split("\n").slice(1);

linhas.forEach(linha => {

const col = linha.split(",");
if(col.length < 10) return;

const receita = {
nome: col[0],
sabor: col[1],
categoria: extrairIngredientePrincipal(col[1]),
tempo: col[3],
rendimento: col[4],
dificuldade: col[5],
calorias: col[6],
carbo: col[7],
prote: col[8],
gord: col[9],
fibras: col[10],
validade: col[11],
conservacao: col[12],
utensilios: col[13],
ingredientes: col[14],
preparo: col[15],
dicas: col[16],
substituicoes: col[17]
};

receitas.push(receita);

if(!categorias[receita.categoria]){
categorias[receita.categoria] = [];
}
categorias[receita.categoria].push(receita);

});

categorias = Object.fromEntries(
Object.entries(categorias)
.sort((a,b)=> b[1].length - a[1].length)
);

criarMenu();
mostrarCategorias();

});

function criarMenu(){
const menu = document.getElementById("menuCategorias");
menu.innerHTML="";

const btnTodos = document.createElement("button");
btnTodos.innerText = "üî• Todos ("+receitas.length+")";
btnTodos.onclick = () => mostrarCategorias();
menu.appendChild(btnTodos);

for(const cat in categorias){
const btn = document.createElement("button");
btn.innerText = cat+" ("+categorias[cat].length+")";
btn.onclick = () => mostrarUmaCategoria(cat);
menu.appendChild(btn);
}
}

function criarCard(receita){
const div = document.createElement("div");
div.className="card";

div.innerHTML=`
<div class="emoji-capa">${pegarEmoji(receita.sabor)}</div>
<h3>${receita.nome}</h3>

<div class="detalhes">

<p>‚è± ${receita.tempo}</p>
<p>üî• ${receita.calorias}</p>
<p>üçΩ ${receita.rendimento}</p>
<p>‚≠ê ${receita.dificuldade}</p>

<h4>ü•£ Ingredientes</h4>
<ul>
${receita.ingredientes.split(";").map(i=>`<li>${i}</li>`).join("")}
</ul>

<h4>üë©‚Äçüç≥ Modo de Preparo</h4>
<ul>
${receita.preparo.split(";").map(p=>`<li>${p}</li>`).join("")}
</ul>

<h4>üßä Conserva√ß√£o</h4>
<p>${receita.validade}</p>
<p>${receita.conservacao}</p>

<h4>üç¥ Utens√≠lios</h4>
<p>${receita.utensilios}</p>

<h4>üí° Dicas</h4>
<p>${receita.dicas}</p>

<h4>üîÑ Substitui√ß√µes</h4>
<p>${receita.substituicoes}</p>

</div>
`;

div.onclick = function(){
const det = div.querySelector(".detalhes");
det.style.display = det.style.display==="block"?"none":"block";
}

return div;
}

function mostrarCategorias(){
const container = document.getElementById("conteudo");
container.innerHTML="";

for(const cat in categorias){
const secao = document.createElement("div");
secao.className="secao";
secao.innerHTML=`<h2>${cat}</h2>`;

const carrossel = document.createElement("div");
carrossel.className="carrossel";

categorias[cat].forEach(r=>{
carrossel.appendChild(criarCard(r));
});

secao.appendChild(carrossel);
container.appendChild(secao);
}
}

function mostrarUmaCategoria(cat){
const container = document.getElementById("conteudo");
container.innerHTML="";

const secao = document.createElement("div");
secao.className="secao";
secao.innerHTML=`<h2>${cat}</h2>`;

const carrossel = document.createElement("div");
carrossel.className="carrossel";

categorias[cat].forEach(r=>{
carrossel.appendChild(criarCard(r));
});

secao.appendChild(carrossel);
container.appendChild(secao);
}

function filtrarBusca(){
const termo = document.getElementById("busca").value.toLowerCase();

const filtradas = receitas.filter(r =>
r.nome.toLowerCase().includes(termo) ||
r.sabor.toLowerCase().includes(termo)
);

const container = document.getElementById("conteudo");
container.innerHTML="";

const secao = document.createElement("div");
secao.className="secao";
secao.innerHTML=`<h2>üîé Resultado da Busca</h2>`;

const carrossel = document.createElement("div");
carrossel.className="carrossel";

filtradas.forEach(r=>{
carrossel.appendChild(criarCard(r));
});

secao.appendChild(carrossel);
container.appendChild(secao);
}

</script>

</body>
</html>
